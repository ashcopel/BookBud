<!doctype html>
<html>
    <head>
        <title> Retrieve a Book Entry</title>
        <link href="styles/style1.css" rel="stylesheet">
        <link href="styles/style2a.css" rel="stylesheet">
        <script language="javascript">
            window.addEventListener("load", readAll);

            function readAll() {
                fetch("http://localhost:4444/retrieve")
                .then(response => response.json())
                .then(function(data) {
                    const records = document.getElementById("records");  // Ensure the table exists
                    data.forEach(row => {
                        records.innerHTML += 
                        `<tr>
                            <td><a href="retrieve-one.html?userid=${row.userid}">${row.userid}</a></td>
                            <td>${row.bookname}</td>
                            <td>${row.bookrating}</td>
                            <td>${row.bookcomment}</td>
                            <td>${row.startdate}</td> 
                            <td>${row.enddate}</td> 
                            <td>${row.bookgenre}</td> 
                        </tr>`;
                    });
                });
            }
        </script>
    </head>
    <body style="background-color: lavenderblush;">
        <div class="main" style="background-color: cadetblue;">
            <ul style="text-align: center;">
                <li><a href="create.html" class="myA"> Create Entry</a></li>
                <li><a href="homepage.html" class="myA"> Home </a></li>
                <li><a href="update.html" class="myA"> Update Entry </a></li>
                <li><a href="delete.html" class="myA"> Delete Entry </a></li>
                <li><a href="aboutcreator.html" class="myA"> About Creator </a></li>
            </ul> 
        </div>
        <div class="meat">
            <h1 class="myH1"> Find a Book Entry </h1>
            <img class="myIMG" src="pics/Book4.jpg" style="display: block; margin: auto; width: 400px; height: 300px;">
            <h2 class="myH2"> Entries List for Retrieval </h2>
            <table id="records" style="margin: auto; width: 80%; border-collapse: collapse; text-align: center;">
                <tr style="background-color: lightgray;">
                    <th style="padding: 10px; border: 1px solid #ddd; font-family: Arial, Helvetica, sans-serif; color: cadetblue;">ID</th>
                    <th style="padding: 10px; border: 1px solid #ddd; font-family: Arial, Helvetica, sans-serif; color: cadetblue;">BOOK NAME</th>
                    <th style="padding: 10px; border: 1px solid #ddd; font-family: Arial, Helvetica, sans-serif; color: cadetblue;">RATING</th>
                    <th style="padding: 10px; border: 1px solid #ddd; font-family: Arial, Helvetica, sans-serif; color: cadetblue;">DETAILS</th>
                    <th style="padding: 10px; border: 1px solid #ddd; font-family: Arial, Helvetica, sans-serif; color: cadetblue;">START DATE</th> <!-- Add Start Date header -->
                    <th style="padding: 10px; border: 1px solid #ddd; font-family: Arial, Helvetica, sans-serif; color: cadetblue;">END DATE</th> <!-- Add End Date header -->
                    <th style="padding: 10px; border: 1px solid #ddd; font-family: Arial, Helvetica, sans-serif; color: cadetblue;">GENRE</th> <!-- Add Genre header -->
                </tr>
                <!-- JavaScript will populate the rows below -->
            </table>            
        </div>
    </body>
</html>


